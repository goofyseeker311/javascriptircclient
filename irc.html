<html>

test.

<script>
const socket = new WebSocket('wss://localhost/wsirc');

socket.onopen = function(event) {
  // Handle connection open
  document.write("Connection open.<br>\n");
  //alert('You are Connected to WebSocket Server');
  sendMessage("nick guest"+Math.floor(Math.random()*10000000));
  sendMessage("user guest guest guest: guest");
};

socket.onmessage = function(event) {
  // Handle received message
  reader = new FileReader();
  reader.onload = function(e) {
    messagetext = reader.result;
    document.write("Received message: "+messagetext+".<br>\n");
    console.log("Message from server: ", messagetext);
  };
  reader.readAsText(event.data);
};

socket.onclose = function(event) {
  // Handle connection close
  document.write("Connection close.<br>\n");
};

function sendMessage(message) {
  socket.send(message);
}
</script>
